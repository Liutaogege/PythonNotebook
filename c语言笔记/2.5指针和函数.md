指针的自加自减：*p++，\*p--，从右向左



# 函数的指针和指向函数的指针变量

在编译系统时，系统会为每一个函数分配一个内存单元，占有地址，所以函数也是有地址的。这个地址被称为函数的入口地址。函数的入口地址称为函数的指针。

可以用指针变量调用所指向的函数。那如何将指针变量指向函数呢？格式如下：`指针变量=函数名`

```c
int (*s)(int, int)=sum;
或者
int (*s)(int, int);
s=sum;
```



注意：

1. 赋予指针变量的值只能是某个函数的函数名，而且该函数必须已经被定义或声明，函数返回值类型和指针变量的类型要相同。

2. 指针变量可以先后指向返回值类型相同的的函数。

   ```c
   // 先后给函数指针赋值
   int (*q)(int, int);
   q=sum;
   printf("%d\t", q(1,2));
   q=max;
   printf("%d\n---------------------\n", q(1,2));
   printf("%d", s(1,2));
   ```

   

指向函数的指针的格式：

`类型说明符 (*指针变量名) (函数参数列表)`，定义指针变量时的数据类型和定义函数时的数据类型必须一致。“*指针变量名”必须要加括号，因为优先级的问题，若写成int *p();则会表示成这是一个函数，该函数的返回值是指向整型的一个指针。

```c
// 定义一个指针变量,可以先不用赋值
int (*p) (int,int);

// 把函数入口地址赋值给指针变量
p=funct;
```



# 指向函数的指针变量作为函数参数

```c
#include <stdio.h>
#include <string.h>

int main() {
    int sum(int, int);
    int max(int, int);
    int func(int, int, (*p)(int,int), (*q)(int, int));
    // 直接带入函数名即可
    int r=func(1,3,sum,max);
    printf("%d\n------------------\n", r);
    
    int (*s)(int, int)=sum;
    int (*m)(int, int)=max;
    int x=1;
    int y=2;
    int res=0;
    res=func(x,y,s,m);
    printf("%d", res);
    return 0;
}

int max (int x, int y) {
    int n=x>y? x:y;
    return n;
}

int sum (int x, int y) {
    int z=x+y;
    return z;
}

int func(int x, int y, (*p)(int, int), (*q)(int, int)) {
    int sum=(*p)(x,y) * (*q)(x,y);
    return sum;
}
```



## 返回指针值的函数

函数可以返回指针。

格式为：`类型名 *函数名`

```c
int *func() {
  int *p;
  return (p);
}
```





## 字符串指针作为函数参数

定义字符串数组，然后指向或者直接指向。

```c
char str[100]="china";
char *p;
p=str;

//或者
char *p=str;
// 或者
char *p="china";
```

示例：使用字符串指针将一个字符串赋值到另一个字符串

==方法一：使用普通函数==

```c
int main() {
    void Strcp(char *p, char *q);
    char a[10]={0};
    char b[10]="goods";
    Strcp(a, b);
    printf("%s", a);
    return 0;
}

void Strcp(char *p, char *q) {
  // (*p=*q)这里就在逐渐赋值
    while ((*p=*q) != '\0') {
        p++;
        q++;
    }
}
```

==方法二：使用返回指针值的函数==

```c
char *Strcpy(char *p, char *q) {
    char *cp=p;
    while ((*cp=*q) != '\0') {
        cp++;
        q++;
    }
    return p;
}

int main() {
    char a[10]={0};
    char b[10]="goods";
    Strcpy(a, b);
    printf("%s", a);
    return 0;
}
```


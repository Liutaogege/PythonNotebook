## 安装docker

不同系统的安装方法不相同，详见docker的官方文档：https://docs.docker.com/engine/install/

下面以Centos7为示例：

	```
	1.卸载老的docker
	    yum remove docker \
	                  docker-client \
	                  docker-client-latest \
	                  docker-common \
	                  docker-latest \
	                  docker-latest-logrotate \
	                  docker-logrotate \
	                  docker-engine
	              
	 2.安装依赖的库
	 		yum install -y yum-utils
	 
	 3.设置镜像仓库
	     yum-config-manager \
	        --add-repo \
	        https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
	    
	 4.更新软件包索引
	 		yum makecache fast
	 		
	 5.安装docker相关的内容(docker-ce社区版，ee企业版)
	      yum install docker-ce docker-ce-cli containerd.io
	   安装指定版本的docker：
	   	  先查看版本列表：yum list docker-ce --showduplicates | sort -r
	      安装指定版本：sudo yum install docker-ce-18.09.1 docker-ce-cli-18.09.1 containerd.io
	      
	      
	 6.启动docker
	 			systemctl start docker
	 			
	 7.查看是否启动成功
	 			docker version
	 			
	 8.运行hello-world
	 			docker run hello-world
	 
	 9.卸载docker
	 yum remove docker-ce docker-ce-cli containerd.io
	 sudo rm -rf /var/lib/docker
	 ## /var/lib/docker是是docker的默认工作路径
	 sudo rm -rf /var/lib/containerd
	 
	 10.查看版本
	 			docker version
	 
	
	 ```



## docker run的流程

![image-20210821082601309](/Users/jared/Library/Application Support/typora-user-images/image-20210821082601309.png)



# 底层原理

**docker是如何进行工作的？**

docker是一个Client-Server结构的系统，Docker的守护进程运行在主机上，通过Socket客户端访问。

docker server接收到docker-client的指令，就会执行这个命令

![image-20210821083428479](/Users/jared/Library/Application Support/typora-user-images/image-20210821083428479.png)



**docker为什么比虚拟机块？**

1.docker比虚拟机有更少的抽象层

2.docker利用的是宿主机的内核，而虚拟机利用的是新建系统的内核

![image-20210804235250399](/Users/jared/Library/Application Support/typora-user-images/image-20210804235250399.png)

所以，新建一个容器的时候，docker不会像虚拟机一样新建一个操作系统内核，所以消耗更少的资源
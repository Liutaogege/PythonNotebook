# 自定义网络

实现与--link相同的功能，但是没那么笨

#### docker网络模式

bridge：桥接模式（docker默认模式，自定义采用的也是这种模式）

none：不配置网络

host：和主机共享网络

container：容器网络连通（用的少，局限很大）

```
网络模式设置命令：
--net bridge
--net host
--net none
```



#### 创建自己的网络

```
命令：docker network create
具体参数可以通过：docker network create --help查看
docker network create --driver bridge --subnet 192.168.0.0/16 --gateway 192.168.0.1 my_own_net

# 创建完成以后，运行docker时加上
docker run -d -P --name tomcat01 --net my_own_net tomcat
docker run -d -P --name tomcat02 --net my_own_net tomcat

# 发现自定义的网络在使用容器名称可以ping通，即容器之间可以互联
docker exec -it tomcat01 ping tomcat02
```





### 网络连通

使用不同network的容器想要连通该怎嘛办？比如要实现tomcat-01连接mynet?

![image-20210824223253713](/Users/jared/Library/Application Support/typora-user-images/image-20210824223253713.png)

```
# 实现
docker network connect networkID 镜像id

docker network connect mynet tomcat01
这样tomcat01就能ping通mynet以内的任何容器了
docker exec -it tomcat01 ping tomcat-net-01
```

连通的原理实际上就是将tomcat01这个容器复制到mynet网络中的镜像中去了，通过docker network inspect mynet查看

![image-20210824224327812](/Users/jared/Library/Application Support/typora-user-images/image-20210824224327812.png)

> 结论

一个容器可以有多个不同的ip（自定义得到）


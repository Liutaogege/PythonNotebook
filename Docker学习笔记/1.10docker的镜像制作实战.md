# 镜像制作实战

1.准备好所需的文件

2.在目标目录下创建Dockerfile文件，文件内容如下：

```
FROM centos

MAINTAINER liutao<1970237873@qq.com>

COPY readme.txt /usr/local/readme.txt  

ADD jdk-16.0.2_linux-x64_bin.tar.gz /usr/local/
ADD apache-tomcat-9.0.52.tar.gz /usr/lcoal/

RUN yum -y install vim

ENV MYPATH /usr/local

WORKDIR $MYPATH

ENV JAVA_HOME /usr/local/jdk-16.0.2
ENV CLASSPATH $JAVA_HOME/bin/dt.jar:$JAVA_HOME/lib/tools.jar
ENV CATALINA_HOME /usr/local/apache-tomcat-9.0.52
ENV CATALINA_BASH /usr/local/apache-tomcat-9.0.52
ENV PATH $PATH:$JAVA_HOME/bin:$CATALINA_HOME/lib:$CATALINA_HOME/bin

EXPOSE 8080

CMD /usr/local/apache-tomcat-9.0.52/bin/startup.sh && tail -F /usr/local/apache-tomcat-9.0.52/bin/logs/cataline.out
```

> 解释上述文件内容：

**COPY命令：表示将当前目录下的readme.txt文件拷贝到容器中usr/local的readme.txt文件**
**ADD命令将当前目录下的压缩包解压到相应的目录**
**ENV命令，构建环境，构建java目录环境，tomcat环境，最后PATH表示将所有的自定义的路径都加入到PATH中**
**EXPOST暴露端口**
**CMD命令：执行tomcat的启动命令，输出日志**
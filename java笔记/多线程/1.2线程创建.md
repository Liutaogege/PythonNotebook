# 创建有三种方式

* 继承Thread类（重点）：Thread Class
* 实现Runnable接口（重点）：Runnable接口
* 实现Callable接口（了解）：Callable接口



### 1.继承Thread类

> 步骤

1. 自定义线程类继承Thread类
2. 重写run()方法，编写线程执行体
3. 创建线程对象，调用start()方法启动线程

示例：

```java
public class MyThread extends Thread{
    public void run() {
        // run方法，线程执行体
        for (int i=0; i<20; i++) {
            System.out.println("子线程在跑，跑了" + i + "圈");
        }
    }

    public static void main(String[] args) {
        // main方法主线程
        MyThread t = new MyThread();
      // start方法启动子线程
        t.start();
        for (int j=0; j<100; j++) {
            System.out.println("主线程在飞，飞了" + j + "圈");
        }
    }
}
```

下载多个图片示例：

```java
package download_jpg;

import org.apache.commons.io.FileUtils;

import java.io.File;
import java.io.IOException;
import java.net.URL;

public class DownloadThread extends Thread{
    private String url;
    private String jpg_name;

    // 定义构造器，初始化参数
    public DownloadThread (String url, String jpg_name) {
        this.url = url;
        this.jpg_name = jpg_name;
    }

    // 重新定义run方法
    public void run() {
        JpgDownload downer = new JpgDownload();
        downer.downloader(this.url, this.jpg_name);
    }

    // main函数
    public static void main(String[] args) {
        String[] urls = {"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fc-ssl.duitang.com%2Fuploads%2Fitem%2F201805%2F27%2F20180527125333_xwtmn.thumb.400_0.jpg&refer=http%3A%2F%2Fc-ssl.duitang.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1637235494&t=5d6fc493aa904d0d3656f28a7418f351",
        "https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fimg.jj20.com%2Fup%2Fallimg%2F1114%2F060421091316%2F210604091316-2-1200.jpg&refer=http%3A%2F%2Fimg.jj20.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1637235494&t=f7f65df2bc9ef502e3b687b9d8dbfced",
        "https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fnimg.ws.126.net%2F%3Furl%3Dhttp%253A%252F%252Fdingyue.ws.126.net%252F2021%252F0611%252F85317485j00qujiyc0024c000hs012ic.jpg%26thumbnail%3D650x2147483647%26quality%3D80%26type%3Djpg&refer=http%3A%2F%2Fnimg.ws.126.net&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1637235494&t=4a950508d6d8ce0d435eb736837b20d5"};
        String[] names= {"1.jpg", "2.jpg", "3.jpg"};
        DownloadThread t1 = new DownloadThread(urls[0], names[0]);
        DownloadThread t2 = new DownloadThread(urls[1], names[1]);
        DownloadThread t3 = new DownloadThread(urls[2], names[2]);
        t1.start();
        t2.start();
        t3.start();
    }


}

class JpgDownload {
    public void downloader(String url, String jpg_name) {
        try {
            FileUtils.copyURLToFile(new URL(url), new File(jpg_name));
            System.out.println("成功下载图片" + jpg_name);
        }catch (IOException e) {
            e.printStackTrace();
            System.out.println("IO异常，downloader出现问题");
        }
    }
}

```



### 2.实现Ruunable接口

> 步骤

* 定义MyRunnable类实现Runnable接口
* 实现run()方法，编写线程执行体
* 创建线程对象，调用start()方法启动线程

```java
public class DownloadThread implements Runnable{
    public void run() {
        // 重写Runnable接口的run方法
        for (int i=0; i<20; i++) {
            System.out.println("我是Runnable接口的实现类线程对象"+i);
        }
    }

    public static void main(String[] args) {
        // 创建Runnable接口的实现类对象
        DownloadThread t = new DownloadThread();
        // 创建一个线程对象来开启我们的代理
//        new Thread(t).start();    //这个写法同下,这种写法有点像匿名的感觉
        Thread thread = new Thread(t);
        thread.start();

        for (int j=0; j<100; j++) {
            System.out.println("我是主线程在跑"+j);
        }
    }
}
```



==两种方法总结==

* 继承Thread类
  * 子类继承Thread类具备多线程能力
  * 启动线程：子类对象.start()
  * 不建议使用：避免oop单继承局限性
* 实现Runnable接口
  * 实现接口Runnable具有多线程能力
  * 启动线程：传入目标对象+Thread对象.start()，比如`new Thread(t).start()`
  * 推荐使用，避免单继承局限性，灵活方便，方便同一个对象被多个线程使用



### 3.实现Callable接口

> 步骤

1. 实现Callable接口，需要返回值类型
2. 重写call方法，需要抛出异常
3. 创建目标对象
4. 创建执行服务：ExecutorService ser = Executors.newFixedThreadPool(1);
5. 提交执行：Future <Boolean> result = ser.submit(t1);
6. 获取结果：boolean r1 = result1.get()
7. 关闭服务：ser.shutdownNow();

优点：可以定义返回值，可以抛出异常

```java
package callable_download;

import download_jpg.DownloadThread;
import org.apache.commons.io.FileUtils;

import java.io.File;
import java.io.IOException;
import java.net.URL;
import java.util.concurrent.*;

// <Boolean>表示该类的返回值是Boolean类型
public class DownloadCallable implements Callable<Boolean> {
    private String url;
    private String jpg_name;

    // 定义构造器，初始化参数
    public DownloadCallable (String url, String jpg_name) {
        this.url = url;
        this.jpg_name = jpg_name;
    }

    // 重写call方法
    public Boolean call() {
        JpgDownload downer = new JpgDownload();
        downer.downloader(this.url, this.jpg_name);
        // 要有返回值
        return true;
    }

    public static void main(String[] args) throws ExecutionException, InterruptedException {
        String[] urls = {"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fc-ssl.duitang.com%2Fuploads%2Fitem%2F201805%2F27%2F20180527125333_xwtmn.thumb.400_0.jpg&refer=http%3A%2F%2Fc-ssl.duitang.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1637235494&t=5d6fc493aa904d0d3656f28a7418f351",
                "https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fimg.jj20.com%2Fup%2Fallimg%2F1114%2F060421091316%2F210604091316-2-1200.jpg&refer=http%3A%2F%2Fimg.jj20.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1637235494&t=f7f65df2bc9ef502e3b687b9d8dbfced",
                "https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fnimg.ws.126.net%2F%3Furl%3Dhttp%253A%252F%252Fdingyue.ws.126.net%252F2021%252F0611%252F85317485j00qujiyc0024c000hs012ic.jpg%26thumbnail%3D650x2147483647%26quality%3D80%26type%3Djpg&refer=http%3A%2F%2Fnimg.ws.126.net&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1637235494&t=4a950508d6d8ce0d435eb736837b20d5"};
        String[] names= {"1.jpg", "2.jpg", "3.jpg"};
        DownloadCallable t1 = new DownloadCallable(urls[0], names[0]);
        DownloadCallable t2 = new DownloadCallable(urls[1], names[1]);
        DownloadCallable t3 = new DownloadCallable(urls[2], names[2]);

        //1. 创建执行服务：
        ExecutorService ser = Executors.newFixedThreadPool(3);
        //2. 提交执行：
        Future<Boolean> r1 = ser.submit(t1);
        Future<Boolean> r2 = ser.submit(t2);
        Future<Boolean> r3 = ser.submit(t3);
        //3. 获取结果：需要抛出异常，见上面的throws
        boolean rs1 = r1.get();
        boolean rs2 = r2.get();
        boolean rs3 = r3.get();
        //4. 关闭服务：
        ser.shutdownNow();
    }
}

class JpgDownload {
    public void downloader(String url, String jpg_name) {
        try {
            FileUtils.copyURLToFile(new URL(url), new File(jpg_name));
            System.out.println("成功下载图片" + jpg_name);
        }catch (IOException e) {
            e.printStackTrace();
            System.out.println("IO异常，downloader出现问题");
        }
    }
}
```


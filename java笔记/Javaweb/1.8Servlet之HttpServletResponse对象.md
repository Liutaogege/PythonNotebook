# HttpServletResponse

Web服务器收到客户端的http请求，会针对每一次请求，分别创建一个用于代表请求的request对象、和代表响应的response对象。
response的对象功能有以下四种：

* 设置响应头信息；
* 发送状态码； 
* 设置响应正文； 
* 重定向；

## 1.设置响应正文

response对象提供了两个响应流对象：

```java
PrintWriter out = response.getWriter() //获取字符流；
ServletOutputStream out = response.getOutputStream()  //获取字节流；
```

在同一个请求中，不能同时使用这两个流，响应正文为字符时，使用response.getWriter(),为字节时使用response.getOutputStream()。

**关于缓冲区**
response.getWriter()是PrintWriter类型，所以它有缓冲区，缓冲区的默认大小为8KB。也就是说，在响应数据没有输出8KB之前，数据都是存放在缓冲区中，而不会立刻发送到客户端。当Servlet执行结束后，服务器才会去刷新流，使缓冲区中的数据发送到客户端。
如果希望响应数据马上发送给客户端：
向流中写入大于8KB的数据；
调用response.flushBuffer()方法来手动刷新缓冲区；

## 2.设置响应头

![](/Users/jared/Library/Application%20Support/marktext/images/2021-11-27-15-10-13-image.png)

## 3.发送状态码

| 修饰符和类型 | 方法                | 说明         |
| ------ | ----------------- | ---------- |
| void   | setStatus(int sc) | 设置此响应的状态码。 |

### 常见应用

下载文件：

1.  要获取下载文件的路径

2. 下载的文件名是啥

3. 设置浏览器能够接收我们的文件格式

4. 获取下载文件的输入流

5. 创建缓冲区

6. 获取OutputStream对象

7. 将FileOutputStream流写入到buffer缓冲区

8. 使用OutputStream

————————————————
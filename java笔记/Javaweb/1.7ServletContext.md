## ServletContext

web容器在启动的时候，它会为每个web程序都创建一个对应的ServletContext对象，它代表了当前的web应用；

* 共享数据
  
  在这个Servlet中保存的数据，可以在另外一个Servlet中拿到
  
  ```java
  ServletContext context = this.getServletContext();
  context.setAttribute("username", "刘涛");
  
  // 获取
  Object username = context.getAttribute("username");
  resp.setContentType("text/html");
  resp.setCharacterEncoding("utf-8");
  resp.getWriter().println("获取到名字为：" + username);
  ```

* 获取初始化参数
  
  ```xml
  <!--  在web应用中初始化一些参数-->
    <context-param>
      <param-name>init-database</param-name>
      <param-value>jdbc:mysql://localhost:3306/testing</param-value>
    </context-param>
  ```
  
  ```java
  //这两句是为了正确显示中文
  resp.setContentType("text/html");
  resp.setCharacterEncoding("utf-8");
  
  ServletContext context = this.getServletContext();
  String db = context.getInitParameter("init-database");
  resp.getWriter().println(db);
  ```

* ## servletContext之请求转发

```java
RequestDispatcher requestDispatcher = context.getRequestDispatcher("/getcontext");  // 请求转发到/getcontext路由
requestDispatcher.forward(req, resp); //forward实现转发，要将req,resp传入进去
```

**请求转发和请求重定向的区别**

```
请求转发：可以理解成是服务器端行为，客户端发起一次请求，这个请求在整个服务器端可以被多次传递，但都是由服务器端的处理程序传递给另一个处理程序，客户端不需要发起二次请求，无论这个请求经历过多少个处理程序，始终都是同一个请求，也就意味着，这个请求中的数据经历过的每一个处理程序都可以使用。
请求重定向：理解成客户端行为，客户端做了两次请求，第一次：客户端request A,服务器响应，并response回来，告诉浏览器，你应该去B；然后看到网址发生改变；第二次：请求新的网址。
```

<img src="/Users/jared/Library/Application Support/typora-user-images/image-20211127102220218.png" alt="image-20211127102220218" style="zoom:50%;" />

<img src="/Users/jared/Library/Application Support/typora-user-images/image-20211127102248807.png" alt="image-20211127102248807" style="zoom:50%;" />

## 读取资源文件

Properties

* 在java目录下新建properties
* 在resources目录下新建properties

java目录和resources目录下的文件都被打包到了同一个路径下：classes，俗称classpath。（注：java下的非java类资源文件默认不会被打包到classes，需要在pom.xml中进行设置）

```
InputStream ios = this.getServletContext().getResourceAsStream("/WEB-INF/classes/db.properties");
        Properties prop = new Properties();
        prop.load(ios);
        Object username = prop.getProperty("username");
        resp.getWriter().println(username);
```

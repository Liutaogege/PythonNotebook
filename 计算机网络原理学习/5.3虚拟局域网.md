# 虚拟局域网

虚拟局域网（Virtual Local Area Network，简称VLAN)

传统的局域网中，一个工作组通常是在同一个网段上，每个网段可以是一个逻辑工作组或子网，多个逻辑工作组之间通过实现互连的网桥或路由来交换数据。如果一个工作组的节点要转移到另一个工作组时就需要将该节点计算机撤出当前网段，加入到新的网段。

虚拟局域网以交换式网络为基础，把网络上的用户（终端设备）分为若干个逻辑工作组，每个逻辑工作组就是一个VLAN.同一逻辑分组的成员可以分布在相同的物理网络上，也可以在不同的物理网络上



## VLAN的划分

实现局域网的途径主要有三种：基于端口，基于MAC地址，基于IP地址

**基于端口的虚拟局域网**
是将交换机按照端口进行分组，每一组定义为一个虚拟局域网。这些端口可以在同一个交换机上，也可以不在



**基于MAC地址的虚拟局域网**
它是把网络上的工作站移动到网络上的不同物理位置时，不需要VLAN进行重新配置，就可同原VLAN内的成员通信。但如果重新更换网卡，就需要重新手动配置数据库



**基于ip地址的虚拟局域网**
交换机根据各站点网络地址自动将其划分成不同的虚拟局域网



## VLAN之间的通信

原则上不同VLAN中的计算机是不能够通信的，但实际生活中要求两个VLAN之间能够通信，这是必须要解决的一个问题。

在LAN内的通信，是通过在数据帧头中指定通信目标的MAC地址来完成的。为了获取MAC地址，TCP/IP协议下ARP地址协议解析MAC地址的方法是通过广播报文来实现的。但是VLAN中广播报文是无法达到的（因为计算机分属不同的VLAN时，就属于不同的广播域）

要VLAN实现通信，就需要利用IOS模型的网络层（ip地址）来进行路由。而能完成路由设备主要有：路由器和三层以上的交换机



（1）路由器实现VLAN通信

路由器的连接方式有两种，第一种，通过路由器的不同物理接口与交换机上的每个VLAN分别连接

![save_share_review_picture_1630423871](/Users/jared/Downloads/save_share_review_picture_1630423871.jpeg)

![save_share_review_picture_1630423868](/Users/jared/Downloads/save_share_review_picture_1630423868.jpeg)



（2）用交换机代替路由器：有两种，启用交换机的路由功能，利用某些高端交换机所支持的专用VLAN功能来实现VLAN间的通信